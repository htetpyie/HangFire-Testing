@model BlogListResponseModel
@{
    Layout = null;
    string url = "/Blog/BlogTable?pageNo={0}&pageSize={1}&searchParam={2}";
    Model.PageSettingModel.PageUrl = url;
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" integrity="sha512-t4GWSVZO1eC8BM339Xd7Uphw5s17a86tIZIj8qRxhnKub6WoyhnrxeCIMeAqBPgdZGlCcG2PrZjMc+Wr78+5Xg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"/>


<table class="table table-hover mt-3" id="blogTable">
    <thead>
    <tr>
        <td colspan="2"></td>
        <td>
            <div class="input-group mb-3">
                <input type="text" id="searchParam" value="@Model.PageSettingModel.SearchParam"
                       class="form-control" placeholder="Search.." aria-label=""/>
                <div class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary" id="searchBtn">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Content</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var blog in Model.BlogList)
    {
        <tr>
            <td>@blog.BlogTitle</td>
            <td>@blog.BlogAuthor</td>
            <td>@blog.BlogContent</td>
        </tr>
    }
    </tbody>
    <tfoot>
    <tr>
        <td colspan="3">
            @await Html.PartialAsync("_Pagination", Model.PageSettingModel)
        </td>
    </tr>
    </tfoot>
</table>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="~/js/signalr/dist/browser/signalr.js"></script>

<script>

 $('#searchBtn').on("click",()=>{
     let pageNo = "@Model.PageSettingModel.PageNo";
     let pageSize = "@Model.PageSettingModel.PageSize";
     let searchParam = $('#searchParam').val();
     let url = "@Html.Raw(Model.PageSettingModel.PageUrl)"
            .replace("{0}",pageNo)
            .replace("{1}",pageSize)
            .replace("{2}",searchParam);
     loadPage(url);
 })
 function loadPage(url){
     $('#blogTable').load(url);
 }
</script>

@* <script> *@
@* "use strict"; *@
@* *@
@* getTable(); *@
@* *@
@* var connection = new signalR.HubConnectionBuilder().withUrl("/blogHub").build(); *@
@* *@
@* connection.on("ReceiveList", function (list) { *@
@*     drawBlogTable(list); *@
@* }); *@
@* *@
@* connection.start().then(function () { *@
@*      *@
@* }).catch(function (err) { *@
@*     return console.error(err.toString()); *@
@* }); *@
@* *@
@* function getTable(){ *@
@*      $.ajax({ *@
@*             url: "/Blog/BlogTable", *@
@*             type: "Get", *@
@*             dataType: "json", *@
@*             success: function (result) { *@
@*                 drawBlogTable(result); *@
@*             }, *@
@*             error: function (err) { *@
@*                 console.error(err); *@
@*             } *@
@*         }); *@
@* } *@
@* *@
@* function drawBlogTable(tableRows){ *@
@*      $('#table tbody').empty(); *@
@*                 $(tableRows).each(function (index,item){ *@
@*                     let tr = ` <tr> *@
@*                                  <td>${item.blogTitle}</td> *@
@*                                  <td>${item.blogAuthor}</td> *@
@*                                  <td>${item.blogContent}</td> *@
@*                                   *@
@*                              </tr>`; *@
@*                     $('#table tbody').append(tr); *@
@*                 }) *@
@* } *@
@* *@
@* </script> *@